name: Update Service A

on:
  push:
    branches:
      - main # Change this to your main branch name if it's different

jobs:
  update-service-a:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Push a file to another repository
        uses: dmnemec/copy_file_to_another_repo_action@v1.1.1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          source_file: 'typeDefs.js'
          destination_repo: 'JoshIri360/graphql-service-a'
          destination_folder: '.'
          user_email: 'aidelojejoshua@gmail.com'
          user_name: 'aidelojejoshua'
          commit_message: 'A custom message for the commit' 

      # - name: Push changes to Service A
      #   run: |
      #     git config user.name "GitHub Actions"
      #     git config user.email "actions@github.com"
      #     git add ../graphql-service-a/typeDefs.js ../graphql-service-a/UserModel.js
      #     git commit -m "Update typeDefs and UserModel"
      #     git push
      #   env:
      #     GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
